<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deskripsi Tugas Besar - AMBaTuBes</title>
    <!-- Pastikan path CSS sesuai folder static Anda -->
    <link rel="stylesheet" th:href="@{/css/deskripsiTubes.css}">
    <script type="text/javascript" th:src="@{/js/deskripsiTubes.js}" defer></script>
</head>
<body>

    <header>
        <div class="header-content">
            <div class="brand">
                <span class="logo-text">AMBaTuBes</span>
                <span class="separator">|</span>
                <nav class="breadcrumb">
                    <a th:href="@{/mahasiswa/home}">Dashboard</a>
                    <span class="divider">/</span>
                    
                    <!-- Link Balik ke Dashboard Kelas (Menggunakan idKelas) -->
                    <a th:href="@{/mahasiswa/tubes/{id}(id=${tubesActive.idKelas})}">Tubes</a>
                    
                    <span class="divider">/</span>
                    <span class="current">Deskripsi</span>
                </nav>
            </div>
            
            <div class="user-controls">
                <!-- Initials User -->
                <div class="user-initials" 
                     th:text="${mahasiswa != null ? #strings.substring(mahasiswa.nama, 0, 2).toUpperCase() : 'PP'}">
                     PP
                </div>
                <!-- Logout Action -->
                <button class="logout-btn" onclick="window.location.href='/logout'">
                    <img th:src="@{/icons/exit.png}" alt="Logout" class="icon-img">
                </button>
            </div>
        </div>
    </header>

    <main>
        <div class="detail-card">
            <div class="card-header">
                <!-- JUDUL TUGAS DINAMIS -->
                <h1 th:text="${tubesActive.namaTugas}">Nama Tugas Besar</h1>
                <div class="status-badge">Aktif</div>
            </div>

            <div class="card-body">
                <!-- DESKRIPSI DINAMIS -->
                <!-- white-space: pre-line menjaga format paragraf/enter dari database -->
                <p style="white-space: pre-line;" th:text="${tubesActive.deskripsi}">
                   Deskripsi tugas akan dimuat di sini...
                </p>
                
                <!-- Tanggal Dibuat -->
                <p style="margin-top: 20px; font-size: 0.9em; color: #666;" 
                   th:text="'Tanggal Dibuat: ' + ${tubesActive.tanggalDibuat}">
                </p>
            </div>

            <div class="card-actions">
                
                <!-- TOMBOL JADWAL & NILAI -->
                <!-- Mengarah ke: /mahasiswa/tubes/jadwal-nilai/{idTubes} -->
                <a th:href="@{/mahasiswa/tubes/jadwal-nilai/{id}(id=${tubesActive.idTubes})}" 
                   style="text-decoration: none;">
                    <button class="action-btn" id="jadwal" type="button">
                        <span class="btn-icon">ðŸ“…</span> Jadwal & Nilai
                    </button>
                </a>

                <!-- TOMBOL UNDUH RUBRIK (Dummy) -->
                <button class="action-btn" id="rubrik" type="button">
                    <span class="btn-icon">ðŸ“„</span> Unduh Rubrik
                </button>
                
                <!-- TOMBOL KELOMPOK (Fixed Link) -->
                <!-- Mengarah ke: /mahasiswa/tubes/{idTubes}/kelompok -->
                <a th:href="@{/mahasiswa/tubes/{id}/kelompok(id=${tubesActive.idTubes})}" 
                   style="text-decoration: none;">
                    <button class="action-btn" id="kelompok" type="button">
                        <span class="btn-icon">ðŸ‘¥</span> Kelompok
                    </button>
                </a>

            </div>
        </div>
    </main>

</body>
</html>